var lat,
    lon,
    latLon = [],
    lAndl,
    map;


$(function(){
  getLocation();  
});

function callMap() {

  map = new GMaps({
    div: '#map',
    zoom: 14,
    minZoom: 8,
    maxZoom: 16,
    lat: latLon[0],
    lng: latLon[1],
  });
  
  map.addMarker({
    lat: latLon[0],
    lng: latLon[1],
    // icon: 'http://mapicons.nicolasmollet.com/wp-content/uploads/mapicons/shape-default/color-f70015/shapecolor-no/shadow-0/border-no/symbolstyle-color/symbolshadowstyle-white/gradient-no/star-3.png' 
  });
};
  


function showPosition(position) {
      lat = position.coords.latitude;
      lon = position.coords.longitude;
      latLon = [lat, lon];
      console.log( latLon );
      callMap();
}
  function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, error);
      } else {
        $( '#demo').html( "Geolocation is not supported by this browser." );
      }
  }

  function error(err) {
    console.warn('ERROR(' + err.code + '): ' + err.message);
  }